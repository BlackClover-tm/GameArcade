if (username && password) {
                localStorage.setItem("username", username);
                document.getElementById("loginBox").classList.add("hidden");
                document.getElementById("chatSection").classList.remove("hidden");
            } else {
                alert("لطفاً نام کاربری و رمز عبور را وارد کنید!");
            }
        }

        // ارسال پیام
        function sendMessage() {
            let username = localStorage.getItem("username") || "مهمان";
            let message = document.getElementById("messageInput").value.trim();

            if (message) {
                let chatBox = document.getElementById("chatBox");

                // نمایش پیام خود کاربر
                let myMessageDiv = document.createElement("div");
                myMessageDiv.classList.add("message", "my-message");
                myMessageDiv.textContent = username + ": " + message;
                chatBox.appendChild(myMessageDiv);
                chatBox.scrollTop = chatBox.scrollHeight;

                // ارسال پیام به بقیه
                socket.emit("sendMessage", username + ": " + message);
                document.getElementById("messageInput").value = "";
            }
        }

        // دریافت پیام و نمایش آن
        socket.on("receiveMessage", (message) => {
            let chatBox = document.getElementById("chatBox");

            let messageDiv = document.createElement("div");
            messageDiv.classList.add("message", "other-message");
            messageDiv.textContent = message;
            chatBox.appendChild(messageDiv);
            chatBox.scrollTop = chatBox.scrollHeight;
        });
    </script>

</body>
</html>
